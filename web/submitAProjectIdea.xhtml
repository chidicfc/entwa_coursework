<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="./layout.xhtml">

    <ui:define name="top">

    </ui:define>

    <ui:define name="content">
        <h3>Submit a project idea </h3>
        <p:outputLabel value="In order to assist us in setting up and managing subsequent project contacts it would be helpful if the following information could be supplied." />
        <p:panelGrid>

            <p:row>
                <p:column colspan="7">
                    <h:form id="selectOneOrganisation">
                        <p:outputLabel for="selectOrganisation" value="Select organisation that the new idea is with:" /><br/><br/>
                        <p:selectOneMenu id="selectOrganisation" value="#{organisationBean.organisation}" panelStyle="width:280px" effect="fade" style="width:260px" 
                                         filter="true" filterMatchMode="contains">
                            <f:selectItem itemLabel="Select an organisation" itemValue="" />
                            <f:selectItems value="#{organisationBean.organisations}" /> 
                            <p:ajax update=":manageProjectIdea:organisationForProject" process="selectOrganisation" event="change" listener="#{organisationBean.doGetSelectedOrganisation()}"/>
                        </p:selectOneMenu> <br/>
                        <h:commandButton value="Edit" action="#{organisationBean.doGetOrganisation}"/> <h:commandButton value="Archive" action="#{organisationBean.doArchiveOrganisation}"/>
                    </h:form>
                </p:column>
                <p:column colspan="7">  </p:column>
            </p:row>

            <p:row>
                <p:column colspan="7">
                    <p:outputLabel value="About you and your organisation..." />
                </p:column>
                <p:column colspan="7">
                    <p:outputLabel value="About the project idea..." />
                </p:column>
            </p:row>

            <p:row>
                <p:column colspan="7">
                    <h:form id="manageOrganisationForm">
                        <h:panelGrid columns="2">

                            <h:outputLabel value="Organisation name:" />
                            <h:inputText value="#{organisationBean.organisation.name}" />

                            <h:outputLabel value="Reference number:" />
                            <h:outputLabel value="#{organisationBean.organisation.id}" />

                            <h:inputHidden value="#{organisationBean.organisation.id}" />
                            <h:panelGroup />

                            <h:outputLabel value="Postal address:" />
                            <h:inputTextarea rows="4" cols="25" value="#{organisationBean.organisation.postalAddress}"/>

                            <h:outputLabel value="Post code:" />
                            <h:inputText value="#{organisationBean.organisation.postCode}" />

                            <h:outputLabel value="Outline of what your organisation does:" />
                            <h:inputText value="#{organisationBean.organisation.outline}" />

                            <h:outputLabel value="Contact name:" />
                            <h:inputText value="#{organisationBean.organisation.contactName}" />

                            <h:outputLabel value="Telephone number:" />
                            <h:inputText value="#{organisationBean.organisation.telephoneNumber}" />

                            <h:outputLabel value="Email address:" />
                            <h:inputText value="#{organisationBean.organisation.emailAddress}" />

                            <h:panelGroup />
                            <h:panelGroup />

                            <h:panelGroup />
                            <h:panelGroup />

                            <h:commandButton value="Create Organisation" action="#{organisationBean.doCreateOrganisation}">

                            </h:commandButton>
                            <h:commandButton value="Edit Organisation" action="#{organisationBean.doEditOrganisation}"/>
                        </h:panelGrid>
                    </h:form>
                </p:column>

                <p:column colspan="7">
                    <h:form id="manageProjectIdea">
                        <h:panelGrid columns="2">

                            <h:outputLabel value="Project title:" />
                            <h:inputText value="#{projectIdeaBean.projectIdea.title}" />

                            <h:outputLabel value="Reference number:" />
                            <h:outputLabel value="#{projectIdeaBean.projectIdea.id}" />

                            <p:selectOneMenu id="organisationForProject" value="#{organisationBean.organisation}" panelStyle="width:280px" effect="fade" style="width:260px" 
                                             filter="true" filterMatchMode="contains">
                                <f:selectItems value="#{organisationBean.organisations}" /> 

                            </p:selectOneMenu>
                            <h:panelGrid />

                            <h:outputLabel value="Aims and objectives:" />
                            <h:inputTextarea rows="4" cols="25" value="#{projectIdeaBean.projectIdea.aimsAndObjectives}"/>

                            <h:outputLabel value="Academic question to be answered (blank if unknown):" />
                            <h:inputTextarea rows="4" cols="25" value="#{projectIdeaBean.projectIdea.academicQuestion}"/>

                            <h:outputLabel value="Anticipated deliverables:" />
                            <h:inputTextarea rows="4" cols="25" value="#{projectIdeaBean.projectIdea.anticipatedDeliverables}"/>

                            <h:outputLabel value="Student for whom project has been devised (blank if unknown):" />
                            <h:inputText value="#{projectIdeaBean.projectIdea.student}" />

                            <p:outputLabel for="Status" value="Status:" />
                            <p:selectOneMenu id="Status" value="#{projectIdeaBean.projectIdea.status}" style="width:125px">
                                <f:selectItem itemLabel="Select status" itemValue="Select status" />
                                <f:selectItems value="#{projectIdeaBean.projectIdea.projectIdeaStates}" />
                            </p:selectOneMenu>

                            <h:outputLabel value="Date submitted/Last updated:" />
                            <h:outputLabel value="#{projectIdeaBean.projectIdea.dateSubmitted}" />

                            <h:panelGroup />
                            <h:panelGroup />

                            <h:panelGroup />
                            <h:panelGroup />

                            <h:commandButton value="Create Project Idea" action="#{projectIdeaBean.doCreateProjectIdea(projectIdeaBean.projectIdea, organisationBean.organisation)}"/>
                            <h:commandButton value="Edit Project Idea" />
                        </h:panelGrid>
                    </h:form>
                </p:column>
            </p:row>
        </p:panelGrid>


    </ui:define>

</ui:composition>
